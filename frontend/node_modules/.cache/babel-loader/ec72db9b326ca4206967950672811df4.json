{"ast":null,"code":"import _objectSpread from\"C:/Users/jakev/IdeaProjects/Micronaut/todolist/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/jakev/IdeaProjects/Micronaut/todolist/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import TodoItem from\"./TodoItem\";import TodoService from\"../services/todo.service\";import AuthService from\"../services/auth.service\";import ItemForm from\"./ItemForm\";import{DragDropContext,Draggable,Droppable}from\"react-beautiful-dnd\";import Message from\"./Message\";import'../css/todo.css';import Loader from\"./Loader\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function TodoList(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),items=_useState4[0],setItems=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),message=_useState6[0],setMessage=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),tagMessage=_useState8[0],setTagMessage=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),color=_useState10[0],setColor=_useState10[1];var _useState11=useState(true),_useState12=_slicedToArray(_useState11,2),loading=_useState12[0],setLoading=_useState12[1];function clearTagMessage(){setTagMessage('');}function addTag(tag){var added=true;setItems(items.map(function(item){if(item.id===tag.itemId){if(item.tags){if(item.tags.length<3){item.tags.push(tag);setColor('');setTagMessage('');}else{setTagMessage('too much tags');setColor('RED');added=false;return item;}}else item.tags=[tag];}return item;}));if(added)TodoService.addTag(tag).catch(function(error){if(error.response===undefined){setMessage(\"Changes can not be saved\");setColor('RED');}});}function toggleItem(id){setItems(items.map(function(item){if(item.id===id){item.done=!item.done;TodoService.updateItemDone(item).then(function(){setMessage('');setColor('');}).catch(function(error){if(error.response===undefined){setMessage(\"Changes can not be saved\");setColor('RED');}});}return item;}));}function removeItem(id){setItems(items.filter(function(item){return item.id!==id;}).map(function(item,index){item.index=index+1;return item;}));TodoService.removeItem(id).then(function(){setMessage('');setColor('');TodoService.updateIndexes(items).catch(function(){return undefined;});}).catch(function(error){if(error.response===undefined){setMessage(\"Changes can not be saved\");setColor('RED');}});}function addItem(title){var newItem={title:title,done:false,index:items.length+1,id:Date.now(),ownerName:username};setItems(items.concat([newItem]));TodoService.addItem(newItem).then(function(response){var responseItem=response.data;setItems(items.concat([responseItem]));setMessage('');setColor('');}).catch(function(error){if(error.response===undefined){setMessage(\"Changes can not be saved\");setColor('RED');}});}useEffect(function(){setUsername(AuthService.getCurrentUser().username);TodoService.getTodoItems(username).then(function(response){setMessage('');setColor('');setTimeout(function(){setLoading(false);},1000);setItems(response.data);}).catch(function(error){if(error.response===undefined){setMessage(\"Can not connect to server\");setColor('RED');setLoading(false);}});},[username]);function _onDragEnd(param){var _param$destination;var srcI=param.source.index;var desI=(_param$destination=param.destination)===null||_param$destination===void 0?void 0:_param$destination.index;items.splice(desI,0,items.splice(srcI,1)[0]);setItems(items.map(function(item,index){item.index=index+1;return item;}));setMessage('');setColor('');TodoService.updateIndexes(items).catch(function(error){if(error.response===undefined){setMessage(\"Changes can not be saved\");setColor('RED');}});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"todoForm\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[username,\"'s todo list\"]}),/*#__PURE__*/_jsx(ItemForm,{onCreate:addItem}),message?/*#__PURE__*/_jsx(Message,{message:message,color:color}):undefined]}),/*#__PURE__*/_jsx(DragDropContext,{onDragEnd:function onDragEnd(param){return _onDragEnd(param);},children:/*#__PURE__*/_jsx(Droppable,{droppableId:\"droppable-1\",children:function children(provided,_){return/*#__PURE__*/_jsxs(\"div\",_objectSpread(_objectSpread({style:{textAlign:\"center\"},ref:provided.innerRef},provided.droppableProps),{},{children:[loading?/*#__PURE__*/_jsx(Loader,{}):items.length?items.map(function(item,i){return/*#__PURE__*/_jsx(Draggable,{draggableId:'draggable-'+item.id,index:i,children:function children(provided,snapshot){return/*#__PURE__*/_jsx(\"div\",_objectSpread(_objectSpread(_objectSpread({ref:provided.innerRef},provided.draggableProps),provided.dragHandleProps),{},{style:_objectSpread(_objectSpread({},provided.draggableProps.style),{},{borderRadius:'5px',boxShadow:snapshot.isDragging?\"0 0 .4rem #666\":\"none\"}),children:/*#__PURE__*/_jsx(TodoItem,{item:item,toggleItem:toggleItem,removeItem:removeItem,tags:item.tags,addTag:addTag,message:tagMessage,color:color,clearMessage:clearTagMessage},item.id)}));}},item.id);}):loading?undefined:/*#__PURE__*/_jsx(\"p\",{children:\"No todo!\"}),provided.placeholder]}));}})})]});}export default TodoList;","map":{"version":3,"sources":["C:/Users/jakev/IdeaProjects/Micronaut/todolist/frontend/src/components/TodoList.js"],"names":["React","useEffect","useState","TodoItem","TodoService","AuthService","ItemForm","DragDropContext","Draggable","Droppable","Message","Loader","TodoList","username","setUsername","items","setItems","message","setMessage","tagMessage","setTagMessage","color","setColor","loading","setLoading","clearTagMessage","addTag","tag","added","map","item","id","itemId","tags","length","push","catch","error","response","undefined","toggleItem","done","updateItemDone","then","removeItem","filter","index","updateIndexes","addItem","title","newItem","Date","now","ownerName","concat","responseItem","data","getCurrentUser","getTodoItems","setTimeout","onDragEnd","param","srcI","source","desI","destination","splice","provided","_","textAlign","innerRef","droppableProps","i","snapshot","draggableProps","dragHandleProps","style","borderRadius","boxShadow","isDragging","placeholder"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport TodoItem from \"./TodoItem\";\r\nimport TodoService from \"../services/todo.service\"\r\nimport AuthService from \"../services/auth.service\"\r\nimport ItemForm from \"./ItemForm\";\r\nimport {DragDropContext, Draggable, Droppable} from \"react-beautiful-dnd\";\r\nimport Message from \"./Message\";\r\nimport '../css/todo.css'\r\nimport Loader from \"./Loader\";\r\n\r\nfunction TodoList() {\r\n    const [username, setUsername] = useState('');\r\n    const [items, setItems] = useState([]);\r\n    const [message, setMessage] = useState('')\r\n    const [tagMessage, setTagMessage] = useState('')\r\n    const [color, setColor] = useState('')\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    function clearTagMessage() {\r\n        setTagMessage('')\r\n    }\r\n\r\n    function addTag(tag) {\r\n        let added = true;\r\n        setItems(items.map(item => {\r\n            if (item.id === tag.itemId) {\r\n                if (item.tags) {\r\n                    if (item.tags.length < 3) {\r\n                        item.tags.push(tag);\r\n                        setColor('');\r\n                        setTagMessage('');\r\n                    } else {\r\n                        setTagMessage('too much tags')\r\n                        setColor('RED')\r\n                        added = false;\r\n                        return item;\r\n                    }\r\n                } else item.tags = [tag]\r\n            }\r\n            return item\r\n        }))\r\n        if (added)\r\n            TodoService.addTag(tag).catch(error => {\r\n                if (error.response === undefined) {\r\n                    setMessage(\"Changes can not be saved\");\r\n                    setColor('RED');\r\n                }\r\n            })\r\n    }\r\n\r\n    function toggleItem(id) {\r\n        setItems(items.map(item => {\r\n            if (item.id === id) {\r\n                item.done = !item.done;\r\n                TodoService.updateItemDone(item).then(() => {\r\n                    setMessage('');\r\n                    setColor('');\r\n                }).catch(error => {\r\n                    if (error.response === undefined) {\r\n                        setMessage(\"Changes can not be saved\");\r\n                        setColor('RED');\r\n                    }\r\n                })\r\n            }\r\n            return item;\r\n        }));\r\n    }\r\n\r\n    function removeItem(id) {\r\n        setItems(items.filter(item => item.id !== id).map((item, index) => {\r\n            item.index = index + 1;\r\n            return item;\r\n        }));\r\n        TodoService.removeItem(id).then(() => {\r\n            setMessage('');\r\n            setColor('');\r\n            TodoService.updateIndexes(items).catch(() => {\r\n                return undefined\r\n            })\r\n        }).catch(error => {\r\n            if (error.response === undefined) {\r\n                setMessage(\"Changes can not be saved\");\r\n                setColor('RED');\r\n            }\r\n        });\r\n    }\r\n\r\n    function addItem(title) {\r\n        let newItem = {title, done: false, index: items.length + 1, id: Date.now(), ownerName: username}\r\n        setItems(items.concat([newItem]));\r\n        TodoService.addItem(newItem).then(response => {\r\n            let responseItem = response.data;\r\n            setItems(items.concat([responseItem]));\r\n            setMessage('');\r\n            setColor('');\r\n        }).catch(error => {\r\n            if (error.response === undefined) {\r\n                setMessage(\"Changes can not be saved\");\r\n                setColor('RED');\r\n            }\r\n        })\r\n    }\r\n\r\n    useEffect(() => {\r\n        setUsername(AuthService.getCurrentUser().username);\r\n        TodoService.getTodoItems(username).then(response => {\r\n            setMessage('');\r\n            setColor('');\r\n            setTimeout(() => {\r\n                setLoading(false)\r\n            }, 1000);\r\n            setItems(response.data);\r\n\r\n        }).catch((error) => {\r\n            if (error.response === undefined) {\r\n                setMessage(\"Can not connect to server\");\r\n                setColor('RED');\r\n                setLoading(false)\r\n            }\r\n        })\r\n    }, [username])\r\n\r\n    function onDragEnd(param) {\r\n        const srcI = param.source.index;\r\n        const desI = param.destination?.index;\r\n        items.splice(desI, 0, items.splice(srcI, 1)[0]);\r\n        setItems(items.map((item, index) => {\r\n            item.index = index + 1;\r\n            return item;\r\n        }));\r\n        setMessage('');\r\n        setColor('');\r\n        TodoService.updateIndexes(items).catch(error => {\r\n            if (error.response === undefined) {\r\n                setMessage(\"Changes can not be saved\");\r\n                setColor('RED');\r\n            }\r\n        });\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className='todoForm'>\r\n                <h1>{username}'s todo list</h1>\r\n                <ItemForm onCreate={addItem}/>\r\n                {message ? <Message message={message} color={color}/> : undefined}\r\n            </div>\r\n            <DragDropContext onDragEnd={(param) => onDragEnd(param)}>\r\n                <Droppable droppableId=\"droppable-1\">\r\n                    {(provided, _) => (\r\n                        <div style={{textAlign: \"center\"}} ref={provided.innerRef} {...provided.droppableProps}>\r\n                            {loading ? <Loader/> : items.length ? items.map((item, i) => (\r\n                                <Draggable\r\n                                    key={item.id}\r\n                                    draggableId={'draggable-' + item.id}\r\n                                    index={i}>\r\n                                    {(provided, snapshot) => (\r\n                                        <div ref={provided.innerRef}\r\n                                             {...provided.draggableProps} {...provided.dragHandleProps}\r\n                                             style={{\r\n                                                 ...provided.draggableProps.style,\r\n                                                 borderRadius: '5px',\r\n                                                 boxShadow: snapshot.isDragging\r\n                                                     ? \"0 0 .4rem #666\"\r\n                                                     : \"none\",\r\n                                             }}>\r\n                                            <TodoItem\r\n                                                item={item}\r\n                                                key={item.id} toggleItem={toggleItem}\r\n                                                removeItem={removeItem}\r\n                                                tags={item.tags} addTag={addTag} message={tagMessage} color={color}\r\n                                                clearMessage={clearTagMessage}/>\r\n                                        </div>\r\n                                    )}\r\n                                </Draggable>\r\n                            )) : (\r\n                                loading ? undefined : (\r\n                                    <p>No todo!</p>\r\n                                ))\r\n                            }\r\n                            {provided.placeholder}\r\n                        </div>\r\n                    )}\r\n                </Droppable>\r\n            </DragDropContext>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default TodoList;"]},"metadata":{},"sourceType":"module"}