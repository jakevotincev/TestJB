{"ast":null,"code":"import _slicedToArray from\"C:/Users/jakev/IdeaProjects/Micronaut/todolist/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import AuthService from\"../services/auth.service\";import{useHistory}from\"react-router-dom\";import Message from\"./Message\";import'../css/login.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(_ref){var login=_ref.login,logout=_ref.logout;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var history=useHistory();var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),register=_useState6[0],setRegister=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),color=_useState10[0],setColor=_useState10[1];function submitHandler(event){event.preventDefault();if(username.trim()&&password.trim()){if(!register)AuthService.login(username,password).then(function(){login();setMessage('');setColor('');history.push('/todo');}).catch(function(error){logout();if(error.response===undefined){setMessage(error.message);setColor('RED');}else if(error.response.status===401){var _message='Invalid login or password';setMessage(_message);setColor('RED');}});else{AuthService.register(username,password).then(function(){setMessage('successfully registered');setColor('GREEN');}).catch(function(error){if(error.response===undefined){setMessage(error.message);setColor('RED');}else{setMessage(error.response.data);setColor('RED');}});}setUsername('');setPassword('');}}return/*#__PURE__*/_jsx(\"div\",{className:\"loginForm\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"form\",onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:\"Username\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:username,onChange:function onChange(event){setUsername(event.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:function onChange(event){setPassword(event.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttons\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:function onClick(){return setRegister(false);},children:/*#__PURE__*/_jsx(\"span\",{children:\"Login\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:function onClick(){return setRegister(true);},children:\"Register\"})]}),message?/*#__PURE__*/_jsx(Message,{style:{padding:\"10px\"},color:color,message:message}):undefined]})});}export default Login;","map":{"version":3,"sources":["C:/Users/jakev/IdeaProjects/Micronaut/todolist/frontend/src/components/Login.js"],"names":["React","useState","AuthService","useHistory","Message","Login","login","logout","username","setUsername","password","setPassword","history","register","setRegister","message","setMessage","color","setColor","submitHandler","event","preventDefault","trim","then","push","catch","error","response","undefined","status","data","target","value","padding"],"mappings":"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","sourcesContent":["import React, {useState} from \"react\";\r\n\r\nimport AuthService from \"../services/auth.service\";\r\nimport {useHistory} from \"react-router-dom\";\r\nimport Message from \"./Message\";\r\nimport '../css/login.css'\r\n\r\n\r\nfunction Login({login, logout}) {\r\n\r\n    const [username, setUsername] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n    const history = useHistory();\r\n    const [register, setRegister] = useState(false)\r\n    const [message, setMessage] = useState('')\r\n    const [color, setColor] = useState('')\r\n\r\n    function submitHandler(event) {\r\n        event.preventDefault();\r\n\r\n        if (username.trim() && password.trim()) {\r\n            if (!register)\r\n                AuthService.login(username, password).then(() => {\r\n                    login();\r\n                    setMessage('')\r\n                    setColor('')\r\n                    history.push('/todo')\r\n                }).catch((error) => {\r\n                    logout()\r\n                    if (error.response === undefined) {\r\n                        setMessage(error.message)\r\n                        setColor('RED')\r\n                    } else if (error.response.status === 401) {\r\n                        let message = 'Invalid login or password'\r\n                        setMessage(message)\r\n                        setColor('RED')\r\n                    }\r\n\r\n                })\r\n            else {\r\n                AuthService.register(username, password).then(() => {\r\n                    setMessage('successfully registered')\r\n                    setColor('GREEN')\r\n                }).catch((error) => {\r\n                    if (error.response === undefined) {\r\n                        setMessage(error.message)\r\n                        setColor('RED')\r\n                    } else {\r\n                        setMessage(error.response.data)\r\n                        setColor('RED')\r\n                    }\r\n                })\r\n            }\r\n            setUsername('');\r\n            setPassword('');\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"loginForm\">\r\n            <form className='form' onSubmit={submitHandler}>\r\n                <div>\r\n                    <label htmlFor=\"username\">Username</label>\r\n                    <br/>\r\n                    <input type=\"text\" value={username} onChange={event => {\r\n                        setUsername(event.target.value)\r\n                    }}/>\r\n                </div>\r\n\r\n                <div>\r\n                    <label htmlFor=\"password\">Password</label>\r\n                    <br/>\r\n                    <input type=\"password\" value={password} onChange={event => {\r\n                        setPassword(event.target.value)\r\n                    }}/>\r\n                </div>\r\n\r\n                <div className=\"buttons\">\r\n                    <button type='submit' onClick={() => setRegister(false)}>\r\n                        <span>Login</span>\r\n                    </button>\r\n\r\n                    <button type=\"submit\" onClick={() => setRegister(true)}>\r\n                        Register\r\n                    </button>\r\n                </div>\r\n                {message ? <Message style={{padding: \"10px\"}} color={color} message={message}/> : undefined}\r\n            </form>\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}